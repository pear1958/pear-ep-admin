import{d as k,aV as x,x as D,aT as J,bE as W,aC as q,aP as R,bL as K,bB as z,O as v,T as Q,aj as Z,ar as ee,aw as ne,ao as te,o as F,b as N,A as H,bJ as y,u as _,N as A,bR as ue}from"./index-iSRBwhZQ.js";var G=function(e,t){var i,n=t.arg;if(!n){console.error("参数有误");return}var a=t.value,d=te(n)?n.value:(i=t.instance)===null||i===void 0?void 0:i.$refs[n];if(!d){console.error("没有找到 ".concat(n," 对应的实例"));return}if(typeof d.addReference!="function"){console.error("".concat(n," 对应的实例不是 VContextmenu"));return}e.$contextmenuKey=n,d.addReference(e,a)},U=function(e,t){var i,n=e.$contextmenuKey;if(n){var a=(i=t.instance)===null||i===void 0?void 0:i.$refs[n];a==null||a.removeReference(e)}},oe=function(e,t){U(e,t),G(e,t)},re={mounted:G,updated:oe,beforeUnmount:U},b={contextmenu:"v-contextmenu",contextmenuIcon:"v-contextmenu-icon",contextmenuInner:"v-contextmenu-inner",contextmenuDivider:"v-contextmenu-divider",contextmenuItem:"v-contextmenu-item",contextmenuItemHover:"v-contextmenu-item--hover",contextmenuItemDisabled:"v-contextmenu-item--disabled",contextmenuGroup:"v-contextmenu-group",contextmenuGroupTitle:"v-contextmenu-group__title",contextmenuGroupMenus:"v-contextmenu-group__menus",contextmenuSubmenu:"v-contextmenu-submenu",contextmenuSubmenuTitle:"v-contextmenu-submenu__title",contextmenuSubmenuMenus:"v-contextmenu-submenu__menus",contextmenuSubmenuMenusTop:"v-contextmenu-submenu__menus--top",contextmenuSubmenuMenusRight:"v-contextmenu-submenu__menus--right",contextmenuSubmenuMenusBottom:"v-contextmenu-submenu__menus--bottom",contextmenuSubmenuMenusLeft:"v-contextmenu-submenu__menus--left",contextmenuSubmenuArrow:"v-contextmenu-submenu__arrow"};function ie(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ee(r)}var ae={trigger:["contextmenu"]},le=k({name:"VContextmenu",props:{modelValue:{type:Boolean,default:!1},autoAjustPlacement:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:function(){return"body"}}},emits:["show","hide","update:modelValue"],setup:function(e,t){var i=t.emit,n=x(null),a=x(e.modelValue||!1),d=function(u){a.value=u,i("update:modelValue",u)},h=x({top:0,left:0}),B=D(function(){return{top:"".concat(h.value.top,"px"),left:"".concat(h.value.left,"px")}}),C=x(null),s=function(u,l){var o=u instanceof Event?l:u,E=(o==null?void 0:o.autoAjustPlacement)||e.autoAjustPlacement,c={top:(o==null?void 0:o.top)||0,left:(o==null?void 0:o.left)||0};if(u instanceof Event){var g,O;u.preventDefault(),c.top=(g=o==null?void 0:o.top)!==null&&g!==void 0?g:u.pageY,c.left=(O=o==null?void 0:o.left)!==null&&O!==void 0?O:u.pageX}d(!0),ne(function(){if(E){var $=n.value;if(!$)return;var P=$.clientWidth,j=$.clientHeight;if(j+c.top>=window.innerHeight+window.scrollY){var L=c.top-j;L>window.scrollY&&(c.top=L)}if(P+c.left>=window.innerWidth+window.scrollX){var T=c.left-P;T>window.scrollX&&(c.left=T)}}h.value=c,i("show")})},m=function(){C.value=null,d(!1),i("hide")},w=J(new Map),p=x(),M=D(function(){return p.value&&w.get(p.value)}),X=function(u,l){var o=function(){return l!=null&&l.trigger?Array.isArray(l.trigger)?l.trigger:[l.trigger]:ae.trigger}(),E=function(g){e.disabled||(p.value=u,s(g,{}))};o.forEach(function(c){u.addEventListener(c,E)}),w.set(u,{triggers:o,handler:E})},Y=function(u){var l=w.get(u);l&&(l.triggers.forEach(function(o){u.removeEventListener(o,l.handler)}),w.delete(u))},S=function(u){if(!(!u.target||!n.value||!p.value)){var l=n.value.contains(u.target)||M.value&&M.value.triggers.includes("click")&&p.value.contains(u.target);l||d(!1)}};return W(a,function(f){f?document.addEventListener("click",S):document.removeEventListener("click",S)}),q(function(){document.removeEventListener("click",S)}),R("visible",a),R("autoAjustPlacement",e.autoAjustPlacement),R("show",s),R("hide",m),{visible:a,style:B,currentReferenceOptions:M,currentOptions:C,contextmenuRef:n,addReference:X,removeReference:Y,toggle:d,show:s,hide:m}},methods:{renderContent:function(){var e,t;return K(v("div",{class:b.contextmenu,ref:"contextmenuRef",style:this.style},[v("ul",{class:b.contextmenuInner},[(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t,{triggerOptions:"currentReferenceOptions",options:"currentOptions"})])]),[[z,"visible"]])}},render:function(){var e;return this.visible?this.teleport?v(Q,{to:this.teleport},ie(e=this.renderContent())?e:{default:function(){return[e]}}):this.renderContent():null}});function I(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var V=k({name:"VContextmenuItem",props:{disabled:{type:Boolean,default:!1},hideOnClick:{type:Boolean,default:!0}},emits:["click","mouseenter","mouseleave"],setup:function(e,t){var i=t.emit,n=Z("hide"),a=x(!1),d=D(function(){var s;return s={},I(s,b.contextmenuItem,!0),I(s,b.contextmenuItemDisabled,e.disabled),I(s,b.contextmenuItemHover,a.value),s}),h=function(m){e.disabled||(i("click",m),e.hideOnClick&&(n==null||n()))},B=function(m){e.disabled||(a.value=!0,i("mouseenter",m))},C=function(m){e.disabled||(a.value=!1,i("mouseleave",m))};return{classes:d,handleClick:h,handleMouseenter:B,handleMouseleave:C}},render:function(){var e,t;return v("li",{class:this.classes,onClick:this.handleClick,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[(e=(t=this.$slots).default)===null||e===void 0?void 0:e.call(t)])}}),se=k({name:"VContextmenuDivider",render:function(){return v("li",{class:b.contextmenuDivider},null)}});const ce={class:"bg-white dark:bg-dark p-4 cursor-pointer"},de={class:"flex-c mt-4 box"},ve=k({__name:"contextMenu",setup(r){const e={...re},t=()=>{console.log("click")};return(i,n)=>(F(),N("div",ce,[n[4]||(n[4]=H("div",null,"右键菜单",-1)),K((F(),N("div",de,n[0]||(n[0]=[H("span",null,"右键点击此区域",-1)]))),[[e,void 0,"contextmenu"]]),v(_(le),{ref:"contextmenu"},{default:y(()=>[v(_(V),{onClick:t},{default:y(()=>n[1]||(n[1]=[A("菜单1")])),_:1}),v(_(se)),v(_(V),null,{default:y(()=>n[2]||(n[2]=[A("菜单2")])),_:1}),v(_(V),null,{default:y(()=>n[3]||(n[3]=[A("菜单3")])),_:1})]),_:1},512)]))}}),fe=ue(ve,[["__scopeId","data-v-55d2214c"]]);export{fe as default};
